<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.mapper.UserMapper">

    <insert id="insertUser" parameterType="com.ssafy.model.dto.UserDto">
        INSERT INTO users (user_id, user_pw, user_name, user_email)
        VALUES (#{userId}, #{userPw}, #{userName}, #{userEmail})
    </insert>

    <select id="selectOneByUserIdAndPw" resultType="com.ssafy.model.dto.UserDto">
        SELECT 
            user_id AS userId,
            user_pw AS userPw,
            user_name AS userName,
            user_email AS userEmail,  <!-- 수정된 부분 -->
            NULL AS userNickname,
            0 AS userLevel,
            0 AS userVisited,
            NULL AS userSalt
        FROM users
        WHERE user_id = #{userId} AND user_pw = #{userPw}
    </select>

    <select id="selectOneByUserId" parameterType="string" resultType="com.ssafy.model.dto.UserDto">
        SELECT 
            user_id AS userId,
            user_pw AS userPw,
            user_name AS userName,
            user_email AS userEmail,  <!-- 수정된 부분 -->
            NULL AS userNickname,
            0 AS userLevel,
            0 AS userVisited,
            NULL AS userSalt
        FROM users 
        WHERE user_id = #{userId}
    </select>

    <select id="selectOneByUserEmail" parameterType="string" resultType="com.ssafy.model.dto.UserDto">
        SELECT 
            user_id AS userId,
            user_pw AS userPw,
            user_name AS userName,
            user_email AS userEmail,  <!-- 수정된 부분 -->
            NULL AS userNickname,
            0 AS userLevel,
            0 AS userVisited,
            NULL AS userSalt
        FROM users 
        WHERE user_email = #{userEmail}
    </select>

    <update id="updateUser" parameterType="com.ssafy.model.dto.UserDto">
        UPDATE users 
        SET user_name = #{userName}, 
            user_email = #{userEmail}  <!-- 수정된 부분 -->
        WHERE user_id = #{userId}
    </update>

    <update id="updateUserPw" parameterType="map">
        UPDATE users 
        SET user_pw = #{modifyUserPw} 
        WHERE user_id = #{userId} AND user_pw = #{userPw}
    </update>

    <delete id="deleteUser" parameterType="map">
        DELETE FROM users 
        WHERE user_id = #{userId} AND user_pw = #{userPw}
    </delete>

    <select id="getAllUsers" resultType="com.ssafy.model.dto.UserDto">
        SELECT 
            user_id AS userId,
            user_pw AS userPw,
            user_name AS userName,
            user_email AS userEmail,  <!-- 수정된 부분 -->
            NULL AS userNickname,
            0 AS userLevel,
            0 AS userVisited,
            NULL AS userSalt
        FROM users
    </select>

</mapper>
